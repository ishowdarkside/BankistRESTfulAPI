import{r as w,c as y,j as e,S as b,L as W,n as p}from"./index-538c2be6.js";import{u as q,I as t}from"./Input-67350c20.js";import{B as _}from"./Button-0ea867eb.js";const L=async r=>{try{return await(await fetch("/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json",credentials:"include"},body:JSON.stringify(r)})).json()}catch(l){throw new Error(l)}},P="_inputWrapper_14n8q_1",S="_registerForm_14n8q_11",M="_signupBody_14n8q_27",B="_errorMessage_14n8q_48",F="_fieldWrapper_14n8q_57",a={inputWrapper:P,registerForm:S,signupBody:M,errorMessage:B,fieldWrapper:F};function E(){var c,m,o,u,g,h,x;const[r,l]=w.useState(!1),{register:n,handleSubmit:j,formState:{errors:s},reset:v}=q(),f=y();async function N(d){l(!0);try{const i=await L(d);if(i.status==="fail")return p.error(i.message);i.status==="success"&&p.success(i.message),document.cookie=`jwt=${i.token};path=/`,f("/app")}catch(i){p.error(i.message)}finally{v(),l(!1)}}return r?e.jsx(b,{}):e.jsxs("div",{className:a.signupBody,children:[e.jsx("h1",{children:"Darkside banking"}),e.jsxs("form",{className:a.registerForm,onSubmit:j(d=>N(d)),children:[e.jsxs("div",{className:a.fieldWrapper,children:[e.jsxs("div",{className:a.inputWrapper,children:[e.jsx("img",{src:"/id-card.svg"}),e.jsx(t,{type:"text",placeholder:"First Name",register:n,label:"name",validation:{required:"First Name field is required",minLength:{value:3,message:"Please input more than 3 letters"},maxLength:{value:30,message:"Please input less than 30 letters"}},disabled:r})]}),((c=s==null?void 0:s.name)==null?void 0:c.message)&&e.jsx("span",{className:a.errorMessage,children:s.name.message})]}),e.jsxs("div",{className:a.fieldWrapper,children:[e.jsxs("div",{className:a.inputWrapper,children:[e.jsx("img",{src:"/id-card.svg"}),e.jsx(t,{type:"text",placeholder:"Last Name",register:n,label:"surname",validation:{required:"Last Name is required!",minLength:{value:3,message:"Please input more than 3 letters"},maxLength:{value:30,message:"Please input less than 30 letters"}},disabled:r})]}),((m=s==null?void 0:s.surname)==null?void 0:m.message)&&e.jsx("span",{className:a.errorMessage,children:s.surname.message})]}),e.jsxs("div",{className:a.fieldWrapper,children:[e.jsxs("div",{className:a.inputWrapper,children:[e.jsx("img",{src:"/email.svg"}),e.jsx(t,{type:"email",placeholder:"Email",register:n,label:"email",validation:{required:"You must provide email!"},disabled:r})]}),((o=s==null?void 0:s.email)==null?void 0:o.message)&&e.jsx("span",{className:a.errorMessage,children:s.email.message})]}),e.jsxs("div",{className:a.fieldWrapper,children:[e.jsxs("div",{className:a.inputWrapper,children:[e.jsx("img",{src:"/password.svg"}),e.jsx(t,{type:"password",placeholder:"Password",register:n,label:"password",validation:{required:"Password is required!",minLength:{value:6,message:"Password should contain more than 6 letters!"},maxLength:{value:30,message:"Password can't be larget than 30 letters!"}},disabled:r})]}),((u=s==null?void 0:s.password)==null?void 0:u.message)&&e.jsx("span",{className:a.errorMessage,children:s.password.message})]}),e.jsxs("div",{className:a.fieldWrapper,children:[e.jsxs("div",{className:a.inputWrapper,children:[e.jsx("img",{src:"/password.svg"}),e.jsx(t,{type:"password",placeholder:"Password confirm",register:n,label:"passwordConfirm",validation:{required:"Password confirm is required!",validate:(d,i)=>d===i.password},disabled:r})]}),((g=s==null?void 0:s.passwordConfirm)==null?void 0:g.message)&&e.jsx("span",{className:a.errorMessage,children:s.passwordConfirm.message}),((h=s==null?void 0:s.passwordConfirm)==null?void 0:h.type)==="validate"&&e.jsx("span",{className:a.errorMessage,children:"Passwords are not matching!"})]}),e.jsxs("div",{className:a.fieldWrapper,children:[e.jsxs("div",{className:a.inputWrapper,children:[e.jsx("img",{src:"/calendar.svg"}),e.jsx(t,{type:"date",placeholder:"Birth Year",register:n,label:"birthYear",validation:{required:"You must provide birth year!"},disabled:r})]}),((x=s==null?void 0:s.birthYear)==null?void 0:x.type)==="required"&&e.jsx("span",{className:a.errorMessage,children:s.birthYear.message})]}),e.jsx(_,{type:"primary",disabled:r,children:"SIGNUP"})]}),e.jsxs("span",{children:["Already have an account? ",e.jsx(W,{to:"/auth/login",children:"Login"})]})]})}export{E as default};
