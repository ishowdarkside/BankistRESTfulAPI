import{c as g,u as h,r as x,j as s,S as f,L as j,n as i}from"./index-a1aee26a.js";import{u as y,I as l}from"./Input-4fb923fb.js";import{B as w}from"./Button-9e619ce2.js";async function _(a){try{return await(await fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()}catch(t){throw new Error(t)}}const v="_loginBody_15rup_1",S="_loginForm_15rup_22",F="_inputWrapper_15rup_39",n={loginBody:v,loginForm:S,inputWrapper:F};function k(){const a=g(),{setIsVerified:t}=h(),[o,c]=x.useState(),{handleSubmit:u,register:p,reset:m}=y();async function d(r){if(!(!r.email||!r.password))try{c(!0);const e=await _(r);if(e.status==="fail")return i.error(e.message);e.status==="success"&&i.success(e.message),t(!0),document.cookie=`jwt=${e.token};path=/`,a("/app"),m()}catch(e){i.error(e.message)}finally{c(!1)}}return o?s.jsx(f,{}):s.jsxs("div",{className:n.loginBody,children:[s.jsx("h1",{children:"Darkside banking"}),s.jsxs("form",{onSubmit:u(r=>d(r)),className:n.loginForm,children:[s.jsxs("div",{className:n.inputWrapper,children:[s.jsx("img",{src:"/email.svg"}),s.jsx(l,{type:"text",placeholder:"Email",register:p,label:"email"})]}),s.jsxs("div",{className:n.inputWrapper,children:[s.jsx("img",{src:"/password.svg"}),s.jsx(l,{type:"password",placeholder:"********",register:p,label:"password"})]}),s.jsx(w,{type:"primary",children:"LOGIN"})]}),s.jsxs("span",{children:["Don't have an account? ",s.jsx(j,{to:"/auth/signup",children:"Signup"})]})]})}export{k as default};
